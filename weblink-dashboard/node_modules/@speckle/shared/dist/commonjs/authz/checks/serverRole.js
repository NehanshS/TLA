"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.canUseAdminOverride = exports.hasMinimumServerRole = void 0;
const constants_js_1 = require("../../core/constants.js");
const roles_js_1 = require("../domain/logic/roles.js");
const hasMinimumServerRole = (loaders) => async ({ userId, role: requiredServerRole }) => {
    const userServerRole = await loaders.getServerRole({ userId });
    if (!userServerRole)
        return false;
    return (0, roles_js_1.isMinimumServerRole)(userServerRole, requiredServerRole);
};
exports.hasMinimumServerRole = hasMinimumServerRole;
const canUseAdminOverride = (loaders) => async ({ userId }) => {
    const adminOverrideEnabled = await loaders.getAdminOverrideEnabled();
    if (!adminOverrideEnabled)
        return false;
    return await (0, exports.hasMinimumServerRole)(loaders)({
        userId,
        role: constants_js_1.Roles.Server.Admin
    });
};
exports.canUseAdminOverride = canUseAdminOverride;
//# sourceMappingURL=serverRole.js.map