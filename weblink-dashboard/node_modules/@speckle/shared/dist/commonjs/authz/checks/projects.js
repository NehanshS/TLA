"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isPubliclyReadableProject = exports.hasMinimumProjectRole = void 0;
const roles_js_1 = require("../domain/logic/roles.js");
const types_js_1 = require("../domain/projects/types.js");
const hasMinimumProjectRole = (loaders) => async ({ userId, projectId, role: requiredProjectRole }) => {
    const userProjectRole = await loaders.getProjectRole({ userId, projectId });
    if (!userProjectRole)
        return false;
    return (0, roles_js_1.isMinimumProjectRole)(userProjectRole, requiredProjectRole);
};
exports.hasMinimumProjectRole = hasMinimumProjectRole;
const isPubliclyReadableProject = (loaders) => async ({ projectId }) => {
    const project = await loaders.getProject({ projectId });
    if (!project)
        return false;
    return project.visibility === types_js_1.ProjectVisibility.Public;
};
exports.isPubliclyReadableProject = isPubliclyReadableProject;
//# sourceMappingURL=projects.js.map